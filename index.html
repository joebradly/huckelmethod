<html lang="en" manifest="huckler.manifest">
<head>
<base href="http://huckelmethod.com/" /> <!-- remove before production -->
<title>huckelmethod.com</title>
<meta http-equiv="content-type" content="text/html;charset=UTF-8"> 
<meta charset="utf-8">
<meta name="robots" content="index, follow">
<meta name="description" content="Draw and solve Hückel models directly in your browser.">
<meta name="distribution" content="web">
<meta name="keyword" content="huckel, hückel, chemistry, pi system, diagonalization, huckel method, molecular, orbital, MO, HOMO, LUMO">
<!-- Open Graph -->
<meta property="og:title" content="Hückel Method">
<meta property="og:image" content="http://huckelmethod.com/assets/img/posterboy.jpg">
<meta property="og:url" content="http://huckelmethod.com">
<meta property="og:site_name" content="HückelMethod.com">
<!-- Web App -->
<meta name="apple-mobile-web-app-capable" content="yes"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<!-- Links and Scripts -->
<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min
.js"></script> -->
<script src="http://huckelmethod.com/assets/js/jquery-1.10.2.min.js"></script>
<!-- <script src="assets/js/kinetic-v4.7.4.min.js"></script> -->
<script src="http://huckelmethod.com/assets/js/kinetic-v5.0.0.min.js"></script>
<script src="http://huckelmethod.com/assets/js/numeric-1.2.6.js"></script>
<script src="http://huckelmethod.com/assets/js/jquery.flot.min.js"></script>
<script src="http://huckelmethod.com/assets/js/jquery.flot.selection.min.js"></script>
<link href="assets/css/huckler.css" rel="stylesheet" type="text/css"/>
</head>
<body>


<menu>
<h1>Hückel Method</h1>
<li class="selected"><a href="#">app</a></li>
<li><a href="details.html">details</a></li>
<li><a href="about.html">about</a></li>
<a class="feedback" href="http://huckel.uservoice.com">Suggestions and Feedback</a>
</menu>

<div class="body">

<div id="huckler">
<div class="huckler_controls">
	<div>
	Draw Model <a id="drawmode" class="button">OFF</a>
	-
	<a id="clear" class="button">Clear Model</a>
	</div>
</div>
<div class="transport_controls">
	<div>
		<a id="electrodes" class="button" data-mode="add">+ Leads</a>
		<a id="resolvent" class="button">Resolvent</a>
		<a id="tranmode" class="button">OFF</a>
	</div>
</div>
<div class="spectrum_controls">
	<div>
	 <a id="diagonalize" class="button">Eigenspectrum<a/> <a id="diagmode" class="button">OFF</a>
	</div>
</div>
</div>

<div id="controls">
	<a id="export" class="button">Share Model</a>
	<div id ="modellink"></div>
</div>
</div>

<div id="examples">
	<p><b>Rings</b> (Annulenes)</p>
	Length:
	<form id="rings">
	<select name="N">
		<option>3</option>
		<option>4</option>
		<option>5</option>
		<option>6</option>
		<option>7</option>
		<option>8</option>
		<option>9</option>
		<option>10</option>
		<option>11</option>
		<option>12</option>
		<option>13</option>
		<option>14</option>
		<option>15</option>
		<option>16</option>
	</select>
	<input type="submit" value="Load"/>
	</form>
	
	<br/>
	<p><b>Chains</b></p>
	Length: 
	<form name="chains" id="chains" method="get">
	<select name="N">
		<option>3</option>
		<option>4</option>
		<option>5</option>
		<option>6</option>
		<option>7</option>
		<option>8</option>
		<option>9</option>
		<option>10</option>
		<option>11</option>
		<option>12</option>
		<option>13</option>
		<option>14</option>
		<option>15</option>
		<option>16</option>
	</select>, 
	Dimerization: 
	<input class="d" type="text" name="d" value="1" size="2"/>
	<input type="submit" value="Load"/>
	</form>

	</div>
</div>

<script defer="defer" src="assets/js/huckler.min.js"></script>

<script type="text/javascript">
$(function() {

	// Toggle drawing mode
	model.draw.toggle();
	// Toggle diagonalization mode
	model.diag.toggle();
	// Toggle transport mode
	model.tran.toggle();
	// Activate clear 
	$('#clear').on('click',function() {
		reset();
		model.draw.toggle();
		model.diag.toggle();
		model.tran.toggle();
	});

	$('#electrodes').on('click', function() {
		var button = $(this);

		if (button.attr('data-mode')=='add') {
			model.add_electrodes();
			$(this).html('<b>&ndash;</b> Leads');
			button.attr('data-mode','remove');
		} else {
			model.remove_electrodes();
			$(this).html('<b>+</b> Leads')
			button.attr('data-mode','add');
		}		
	});

	$('#resolvent').on('click',function() {
		transport.plot();
	})

	$('#diagonalize').on('click',function() {
		spectrum.diagonalize();
	});
});

$(function() {

	var _doreload = true;
	$('#export').on('click',function() {
		var json = model.dump();
		if (json===false) { return; }
		_doreload = false; 
		window.location.hash = json;
		var url = 'http://huckelmethod.com/index.html#' + json;
		$('#modellink').html('waiting...');
		getShortUrl(url,loadShortUrl);
	});

	function loadShortUrl(href) {
		var copy = $('<input type="text" />').val(href);
		var link = $('<a>Link</a>').attr('href',href);
		$('#modellink').html(link.add(copy));
	}

	// load from hash functionality
	function loadfromhash() {
		var hash = location.href.substr(location.href.indexOf('#')+1);
		var json = model.loadFromString(hash);
	}

	$(window).on('hashchange', function() {
		if (_doreload === true) {
			loadfromhash();
		}
		_doreload = true;
	});

	loadfromhash();

	function getShortUrl(href, callback)
	{
	   var url = 'http://is.gd/create.php?format=json&url=' + encodeURIComponent(href);
	   var jqxhr  = $.getJSON(
	        url,
	        {},
	        function(response)
	        {
	        	if (response.hasOwnProperty('shorturl') && callback) {
	                callback(response.shorturl);
	            } else if(callback) {
	            	callback(href);
	            }
	        }
	    )
	    .fail(function() {
    		callback(href);
  		});

	};
});

$(function() {

	var form = $('form#rings');
	form.submit(function(e){
		e.preventDefault();
		var N = $( "select", this ).val();
		var hash = ring(N);
		window.location.hash = hash;
	});

	var form = $('form#chains');
	form.submit(function(e){
		e.preventDefault();
		var N = $( "select", this ).val();
		var d = parseFloat( $( "input[name=d]", this ).val());
		var hash = chain(N,d);
		window.location.hash = hash;
	});
});

</script>

</body>
</html>